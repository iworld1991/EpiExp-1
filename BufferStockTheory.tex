\input{./econtexRoot} % Set paths for root and various resources
\documentclass[titlepage]{\econtex}
\providecommand{\texname}{BufferStockTheory}% Keyname for the paper
\usepackage{\LaTeXInputs/\texname}% Styling for whole paper (and subfiles)

\begin{document}

% Redefine commands from sty file to signal compilation from master
\renewcommand{\onlyinsubfile}[1]{}\renewcommand{\notinsubfile}[1]{#1}

\subfile{BufferStockTheory-NoAppendix} % Main body of paper

\pagebreak

%\subfile{\ApndxDir/All-Appendices}

\hypertarget{Appendices}{} % Allows link to [url-of-paper]#Appendices
\appendix \centerline{\LARGE Appendices}\vspace{0.2in}

\subfile{\ApndxDir/ApndxLiqConstr}
\subfile{\ApndxDir/ApndxConcaveCFunc}
\subfile{\ApndxDir/ApndxEuclidian}
\subfile{\ApndxDir/ApndxCGroIsPGro}
\subfile{\ApndxDir/ApndxMPCLimits}
\subfile{\ApndxDir/ApndxLiqConstrAsLimit}
\subfile{\ApndxDir/ApndxSolnMethEndogGpts}
\subfile{\ApndxDir/ApndxSolnMethTermFunc}
\subfile{\ApndxDir/ApndxConditionDiagrams}
\subfile{\ApndxDir/ApndxCGrowthDeclines}
\subfile{\ApndxDir/ApndxMTargetIsStable}

\pagebreak

\IfFileExists{Add-Refs.bib}{
  % then 
  \typeout{References in Add-Refs.bib will take precedence over those elsewhere}
  \setboolean{AddRefsExists}{true}
  \setboolean{NeitherExists}{false}
}{
  % else
  \setboolean{AddRefsExists}{false}
  \setboolean{BothExist}{false}
}

%\IfFileExists{/usr/local/texlive/texmf-local/bibtex/bib/economics.bib}{
\IfFileExists{economics.bib}{
  % then
  \typeout{References in economics.bib will be used for items not found elsewhere}
  \setboolean{economicsExists}{true}
  \setboolean{NeitherExists}{false}
}{
  % else 
  \typeout{Found no economics.bib global database file}
  \setboolean{economicsExists}{false}
  \setboolean{BothExist}{false}
}

\ifthenelse{\boolean{BothExist}}{
  % then use both
  \typeout{bibliography{Add-Refs,\texname,economics}}
  \bibliography{Add-Refs,\texname,economics}
  % else both do not exist
  }{ % maybe neither does?
    \ifthenelse{\boolean{NeitherExists}}{
      \typeout{bibliography{\texname}}
      \bibliography{\texname}}{
      % no -- at least one exists
      \ifthenelse{\boolean{AddRefsExists}}{
        \typeout{bibliography{Add-Refs,\texname}}
        \bibliography{Add-Refs,\texname}}{
        \typeout{bibliography{\texname,economics}}
        \bibliography{         \texname,economics}}
      } % end of picking the one that exists
    } % end of testing whether neither exists

\end{document}
\endinput

% Stuff below configures compilation for AucTeX in Emacs

% Local Variables:
% TeX-master-file: t
% eval: (setq TeX-command-list  (assq-delete-all (car (assoc "BibTeX" TeX-command-list)) TeX-command-list))
% eval: (setq TeX-command-list  (assq-delete-all (car (assoc "Biber"  TeX-command-list)) TeX-command-list))
% eval: (setq TeX-command-list  (remove '("BibTeX" "%(bibtex) ../LaTeX/%s"    TeX-run-BibTeX nil t :help "Run BibTeX") TeX-command-list))
% eval: (setq TeX-command-list  (remove '("BibTeX" "bibtex ../LaTeX/%s"    TeX-run-BibTeX nil t :help "Run BibTeX") TeX-command-list))
% eval: (add-to-list 'TeX-command-list '("BibTeX" "bibtex LaTeX/%s" TeX-run-BibTeX nil t                                                                              :help "Run BibTeX") t)
% eval: (add-to-list 'TeX-command-list '("BibTeX" "bibtex LaTeX/%s" TeX-run-BibTeX nil (plain-tex-mode latex-mode doctex-mode ams-tex-mode texinfo-mode context-mode) :help "Run BibTeX") t)
% TeX-PDF-mode: t
% TeX-file-line-error: t
% TeX-debug-warnings: t
% LaTeX-command-style: (("" "%(PDF)%(latex) %(file-line-error) %(extraopts) -output-directory=LaTeX %S%(PDFout)"))
% TeX-source-correlate-mode: t
% TeX-parse-self: t
% TeX-parse-all-errors: t
% eval: (cond ((string-equal system-type "darwin") (progn (setq TeX-view-program-list '(("Skim" "/Applications/Skim.app/Contents/SharedSupport/displayline -b %n LaTeX/%o %b"))))))
% eval: (cond ((string-equal system-type "gnu/linux") (progn (setq TeX-view-program-list '(("Evince" "evince --page-index=%(outpage) LaTeX/%o"))))))
% eval: (cond ((string-equal system-type "gnu/linux") (progn (setq TeX-view-program-selection '((output-pdf "Evince"))))))
% End:
